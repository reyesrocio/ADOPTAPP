<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Admin - Gesti√≥n de Mascotas</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6fb;
    padding: 30px;
}

h2 {
    text-align: center;
    color: #4a6fa5;
}

.container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
}

input, textarea {
    width: 100%;
    padding: 8px;
    margin: 5px 0;
}

button {
    padding: 10px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

.btn-add {
    background: #4CAF50;
    color: white;
    width: 100%;
    margin-top: 10px;
}

.btn-delete {
    background: #e74c3c;
    color: white;
    margin-left: 10px;
}

.card {
    border: 1px solid #ddd;
    padding: 10px;
    border-radius: 8px;
    margin-top: 10px;
}
</style>
</head>

<body>

<script>
/* üîê Seguridad: solo admin */
if (localStorage.getItem("adminLogueado") !== "true") {
    window.location.href = "admin-login.html";
}
</script>

<div class="container">
<h2>üêæ Gesti√≥n de Mascotas</h2>

<!-- FORMULARIO -->
<input id="nombre" placeholder="Nombre de la mascota">
<input id="tipo" placeholder="Tipo (Perro / Gato)">
<input id="raza" placeholder="Raza">
<input id="edad" type="number" placeholder="Edad">
<input id="tamano" placeholder="Tama√±o">
<input id="sexo" placeholder="Sexo">
<input id="url_imagen" placeholder="URL de imagen (opcional)">
<textarea id="descripcion" placeholder="Descripci√≥n"></textarea>

<button class="btn-add" onclick="agregar()">‚ûï Agregar Mascota</button>

<hr>

<!-- LISTA -->
<div id="lista"></div>

<button onclick="cerrarSesion()" style="margin-top:20px; background:#555; color:white;">
Cerrar sesi√≥n
</button>
</div>

<script>
let db = JSON.parse(localStorage.getItem("mascotasDB")) || [];

function guardar() {
    localStorage.setItem("mascotasDB", JSON.stringify(db));
    render();
}

function agregar() {
    if (!nombre.value || !tipo.value) {
        alert("Completa al menos nombre y tipo");
        return;
    }

    db.push({
        id: Date.now(),
        nombre: nombre.value,
        tipo: tipo.value,
        raza: raza.value,
        edad: edad.value,
        tamano: tamano.value,
        sexo: sexo.value,
        descripcion: descripcion.value,
        url_imagen: url_imagen.value,
        disponible: true
    });

    limpiar();
    guardar();
}

function eliminar(id) {
    if (confirm("¬øEliminar mascota?")) {
        db = db.filter(m => m.id !== id);
        guardar();
    }
}

function limpiar() {
    nombre.value = "";
    tipo.value = "";
    raza.value = "";
    edad.value = "";
    tamano.value = "";
    sexo.value = "";
    descripcion.value = "";
    url_imagen.value = "";
}

function render() {
    lista.innerHTML = "";

    if (db.length === 0) {
        lista.innerHTML = "<p>No hay mascotas registradas.</p>";
        return;
    }

    db.forEach(m => {
        lista.innerHTML += `
        <div class="card">
            <b>${m.nombre}</b> - ${m.tipo}<br>
            Raza: ${m.raza || "Mestizo"}<br>
            Edad: ${m.edad || "-"}<br>
            <button class="btn-delete" onclick="eliminar(${m.id})">‚ùå Eliminar</button>
        </div>
        `;
    });
}

function cerrarSesion() {
    localStorage.removeItem("adminLogueado");
    window.location.href = "admin-login.html";
}

render();
</script>

</body>
</html>
